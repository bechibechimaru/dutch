import{s as ee,n as Q,r as x}from"../chunks/scheduler.BvLojk_z.js";import{S as te,i as ne,s as y,e as g,b as L,m as le,g as k,h as R,c as P,d as z,n as H,f as M,o as f,j as K,k as a,p as A,q as j,r as ae,u as W,l as oe,v as $}from"../chunks/index.CG6y-W0u.js";function X(e){return(e==null?void 0:e.length)!==void 0?e:Array.from(e)}function Y(e,i,t){const o=e.slice();return o[14]=i[t],o[15]=i,o[16]=t,o}function Z(e){let i,t,o,E,_=e[3](e[14])+(e[14].remainder||0)+"",c,O,C,m,U,h,b,v,q,w="支払い方法を選択",T,r="現金",n,N="PayPay",p,S="後日",V,B;function F(){e[9].call(t,e[15],e[16])}function D(){e[10].call(m,e[15],e[16])}function d(){e[11].call(h,e[15],e[16])}return{c(){i=g("div"),t=g("input"),o=y(),E=g("p"),c=L(_),O=L("円"),C=y(),m=g("input"),U=y(),h=g("input"),b=y(),v=g("select"),q=g("option"),q.textContent=w,T=g("option"),T.textContent=r,n=g("option"),n.textContent=N,p=g("option"),p.textContent=S,this.h()},l(s){i=P(s,"DIV",{class:!0});var u=z(i);t=P(u,"INPUT",{type:!0,id:!0,class:!0}),o=R(u),E=P(u,"P",{});var l=z(E);c=M(l,_),O=M(l,"円"),l.forEach(k),C=R(u),m=P(u,"INPUT",{type:!0,placeholder:!0,class:!0}),U=R(u),h=P(u,"INPUT",{class:!0,type:!0,placeholder:!0}),b=R(u),v=P(u,"SELECT",{name:!0,id:!0});var I=z(v);q=P(I,"OPTION",{"data-svelte-h":!0}),H(q)!=="svelte-t2wctg"&&(q.textContent=w),T=P(I,"OPTION",{"data-svelte-h":!0}),H(T)!=="svelte-x87r6k"&&(T.textContent=r),n=P(I,"OPTION",{"data-svelte-h":!0}),H(n)!=="svelte-aime6m"&&(n.textContent=N),p=P(I,"OPTION",{"data-svelte-h":!0}),H(p)!=="svelte-xlrr0q"&&(p.textContent=S),I.forEach(k),u.forEach(k),this.h()},h(){f(t,"type","checkbox"),f(t,"id","is_done_"+e[16]),f(t,"class","svelte-qo0ecv"),f(m,"type","text"),f(m,"placeholder","名前を入力"),f(m,"class","svelte-qo0ecv"),f(h,"class","price svelte-qo0ecv"),f(h,"type","number"),f(h,"placeholder","比率"),q.__value="",A(q,q.__value),T.__value="cash",A(T,T.__value),n.__value="paypay",A(n,n.__value),p.__value="後日",A(p,p.__value),f(v,"name","payment"),f(v,"id","payment"),f(i,"class","info svelte-qo0ecv"),W(i,"is-paid",e[14].isPaid)},m(s,u){K(s,i,u),a(i,t),t.checked=e[14].isPaid,a(i,o),a(i,E),a(E,c),a(E,O),a(i,C),a(i,m),A(m,e[14].name),a(i,U),a(i,h),A(h,e[14].ratio),a(i,b),a(i,v),a(v,q),a(v,T),a(v,n),a(v,p),V||(B=[j(t,"change",F),j(m,"input",D),j(h,"input",d)],V=!0)},p(s,u){e=s,u&1&&(t.checked=e[14].isPaid),u&1&&_!==(_=e[3](e[14])+(e[14].remainder||0)+"")&&oe(c,_),u&1&&m.value!==e[14].name&&A(m,e[14].name),u&1&&$(h.value)!==e[14].ratio&&A(h,e[14].ratio),u&1&&W(i,"is-paid",e[14].isPaid)},d(s){s&&k(i),V=!1,x(B)}}}function se(e){let i,t,o,E="割り勘",_,c,O,C,m="メンバーを追加",U,h,b,v,q=e[6]()+"",w,T,r,n,N,p=e[7]()+"",S,V,B,F,D=X(e[0]),d=[];for(let s=0;s<D.length;s+=1)d[s]=Z(Y(e,D,s));return{c(){i=y(),t=g("main"),o=g("h1"),o.textContent=E,_=y(),c=g("input"),O=y(),C=g("button"),C.textContent=m,U=y();for(let s=0;s<d.length;s+=1)d[s].c();h=y(),b=g("p"),v=L("現在の預かり金額: "),w=L(q),T=L("円"),r=y(),n=g("p"),N=L("残りの金額: "),S=L(p),V=L("円"),this.h()},l(s){le("svelte-1koplbt",document.head).forEach(k),i=R(s),t=P(s,"MAIN",{class:!0});var l=z(t);o=P(l,"H1",{"data-svelte-h":!0}),H(o)!=="svelte-ur8qkq"&&(o.textContent=E),_=R(l),c=P(l,"INPUT",{class:!0,type:!0,placeholder:!0}),O=R(l),C=P(l,"BUTTON",{class:!0,"data-svelte-h":!0}),H(C)!=="svelte-wq89bw"&&(C.textContent=m),U=R(l);for(let J=0;J<d.length;J+=1)d[J].l(l);h=R(l),b=P(l,"P",{});var I=z(b);v=M(I,"現在の預かり金額: "),w=M(I,q),T=M(I,"円"),I.forEach(k),r=R(l),n=P(l,"P",{});var G=z(n);N=M(G,"残りの金額: "),S=M(G,p),V=M(G,"円"),G.forEach(k),l.forEach(k),this.h()},h(){document.title="割り勘",f(c,"class","totalprice svelte-qo0ecv"),f(c,"type","text"),f(c,"placeholder","合計金額を入力"),f(C,"class","svelte-qo0ecv"),f(t,"class","svelte-qo0ecv")},m(s,u){K(s,i,u),K(s,t,u),a(t,o),a(t,_),a(t,c),A(c,e[1]),a(t,O),a(t,C),a(t,U);for(let l=0;l<d.length;l+=1)d[l]&&d[l].m(t,null);a(t,h),a(t,b),a(b,v),a(b,w),a(b,T),a(t,r),a(t,n),a(n,N),a(n,S),a(n,V),B||(F=[j(c,"input",e[8]),j(c,"input",e[5]),j(c,"change",e[4]),j(C,"click",e[2])],B=!0)},p(s,[u]){if(u&2&&c.value!==s[1]&&A(c,s[1]),u&9){D=X(s[0]);let l;for(l=0;l<D.length;l+=1){const I=Y(s,D,l);d[l]?d[l].p(I,u):(d[l]=Z(I),d[l].c(),d[l].m(t,h))}for(;l<d.length;l+=1)d[l].d(1);d.length=D.length}},i:Q,o:Q,d(s){s&&(k(i),k(t)),ae(d,s),B=!1,x(F)}}}function ie(e,i,t){let o=[];function E(){o.push({name:"",ratio:1,isPaid:!1,remainder:0}),t(0,o=[...o])}let _=0,c="";function O(){return o.reduce((r,n)=>r+n.ratio,0)}function C(r){const n=O();return Math.floor(_*(r.ratio/n))}function m(){const r=O();let n=o.reduce((p,S)=>p+Math.floor(_*(S.ratio/r)),0),N=_-n;for(let p=0;N>0;p++)p>=o.length&&(p=0),t(0,o[p].remainder=(o[p].remainder||0)+1,o),N--}function U(r){const N=r.currentTarget.value.replace(/,/g,"");_=parseInt(N,10)||0,t(1,c=_.toLocaleString())}function h(){return o.reduce((r,n)=>n.isPaid?r+C(n)+(n.remainder||0):r,0)}function b(){return _-h()}function v(){c=this.value,t(1,c)}function q(r,n){r[n].isPaid=this.checked,t(0,o)}function w(r,n){r[n].name=this.value,t(0,o)}function T(r,n){r[n].ratio=$(this.value),t(0,o)}return[o,c,E,C,m,U,h,b,v,q,w,T]}class ce extends te{constructor(i){super(),ne(this,i,ie,se,ee,{})}}export{ce as component};
